# Data and ML Flow Documentation (Excluding bot.py)

This document describes the flow of data preparation, model training, and output generation in your Senior Care Bot project, excluding the bot logic (`bot.py`).

---

## Databases and Data Sources Used

### Real/Public Data
- **Singapore Demographics Data**
  - Source: Public datasets (e.g., data.gov.sg, singstat.gov.sg)
  - File: `data/singapore/raw/singapore_demographics.csv`
  - Contains: HDB towns, senior population, household income, healthcare facilities, etc.
- **MOH Hospital Bed Occupancy Data**
  - Source: data.gov.sg API (resource_id: 9ca5bbf8-2a36-468c-93ac-a2f0bdb9b4d9)
  - File: `data/singapore/raw/hospital_bed_occupancy.csv`
  - Contains: Daily occupancy rates, hospital names, elderly patient percentages.
- **Polyclinic Attendance Data**
  - Source: data.gov.sg API (resource_id: 67ce9692-2f34-4f4c-b5e1-7e6b5e7b3c8a)
  - File: `data/singapore/raw/polyclinic_attendance.csv`
  - Contains: Daily attendance, elderly attendance, medication refills.
- **Chronic Disease Prevalence Data**
  - Source: data.gov.sg API (resource_id: 8c5b3c4e-9d2f-4a6b-8e3c-1f7a9b2d5e8f)
  - File: `data/singapore/raw/chronic_disease_prevalence.csv`
  - Contains: Prevalence rates by district, age group, and condition.
- **Bot Activity Data**
  - Source: Local file generated by your bot
  - File: `data/bot_activity_data.csv`
  - Contains: User activity, medication logs, etc.

### Synthetic Data (Used Only If Real Data Is Missing or Insufficient)
- **Simulated Data**
  - Used as fallback or for fall risk modeling
  - Files:
    - `data/singapore/raw/hospital_bed_occupancy_simulated.csv`
    - `data/singapore/raw/polyclinic_attendance_simulated.csv`
    - `data/singapore/raw/chronic_disease_prevalence_simulated.csv`
    - `data/singapore/raw/singapore_demographics_simulated.csv`
  - Generated by: `create_simulated_singapore_data()` and `create_singapore_demographics_data()`

### Integrated/Processed Data
- **Singapore-Enhanced Bot Data**
  - File: `data/singapore/processed/singapore_enhanced_bot_data.csv`
  - Contains: Bot user data merged with Singapore context (town, HDB type, language, etc.)

---

## 1. Data Setup and Acquisition

### Program: `singapore_data_setup.py`
- **Purpose:** Download, simulate, and clean Singapore health datasets and demographics for ML modeling.
- **Reads Databases From:**
  - Public APIs (e.g., data.gov.sg) via HTTP requests (simulated or real)
  - Local CSV files (e.g., `data/bot_activity_data.csv`)
- **Main Functions:**
  - `setup_singapore_data_environment()`: Creates required directory structure.
  - `download_singapore_health_data()`: Downloads or simulates health datasets, saves to `data/singapore/raw/`.
  - `create_simulated_singapore_data()`: Generates realistic synthetic data if download fails.
  - `create_singapore_demographics_data()`: Simulates and saves demographics data to `data/singapore/raw/singapore_demographics.csv`.
  - `integrate_singapore_bot_data()`: Merges bot activity data with Singapore context, outputs to `data/singapore/processed/singapore_enhanced_bot_data.csv`.
- **Outfile Files:**
  - `data/singapore/raw/*.csv` (raw health, attendance, demographics)
  - `data/singapore/processed/singapore_enhanced_bot_data.csv` (final integrated dataset)

---

## 2. ML Model Training and Visualization

### Program: `singapore_ml_models.py`
- **Purpose:** Train ML models for medication adherence, fall risk, and health anomaly detection using Singapore datasets.
- **Reads Databases From:**
  - Processed CSV files (e.g., `data/singapore/processed/singapore_enhanced_bot_data.csv`)
- **Main Functions/Classes:**
  - `MedicationAdherenceModel`: Trains and evaluates medication adherence prediction.
  - `SingaporeFallRiskModel`: Trains and evaluates fall risk regression model.
  - `SingaporeHealthAnomalyModel`: Trains and evaluates anomaly detection model.
  - `main()`: Orchestrates training of all models and saves outputs.
- **Outfile Files:**
  - Model files: `models/singapore_models/*.pkl` (trained model objects)
  - Visualizations: `models/singapore_models/*.html` (feature importance, confusion matrices, etc.)

---

## 3. Output Review
- **Final HTML Files:**
  - All interactive visualizations are saved in `models/singapore_models/` as HTML files.
  - These can be opened in a browser or embedded in dashboards for review.

---

## Summary Flow
1. Run `singapore_data_setup.py` to prepare all datasets.
2. Run `singapore_ml_models.py` to train models and generate outputs.
3. Review results in `models/singapore_models/*.html`.

> All steps are isolated from the bot logic. You can update, rerun, or debug these scripts independently.
